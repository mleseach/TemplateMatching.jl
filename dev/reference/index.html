<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference · TemplateMatching.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://mleseach.github.io/TemplateMatching.jl/reference/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">TemplateMatching.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Get started</a></li><li class="is-active"><a class="tocitem" href>Reference</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Available-algorithms"><span>Available algorithms</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Reference</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/mleseach/TemplateMatching.jl/blob/master/docs/src/reference.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="TemplateMatching.match_template" href="#TemplateMatching.match_template"><code>TemplateMatching.match_template</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">match_template(source, template, alg::Algorithm)</code></pre><p>Performs template matching between the source image and template using a specified algorithm.</p><p>Compare a template to a source image using the algorithm specified by the <code>alg</code> parameter. It is designed to work with arrays of more than two dimensions, making it suitable for multidimensional arrays or sets of images. The function slides the template over the source array in all possible positions, computing a similarity metric at each position.</p><p><strong>Arguments</strong></p><ul><li><code>source</code>: Source array to search within. </li><li><code>template</code>: Template array to search for.</li><li><code>alg::Algorithm</code>: Algorithm to use for calculating the similarity metric.</li></ul><p>The dimensions of the <code>source</code> array should be greater than or equal to the dimensions of the <code>template</code> array. If the <code>source</code> is of size <code>(S_1, S_2, ...)</code> and <code>template</code> is <code>(T_1, T_2, ...)</code>, then the size of the resultant match array will be <code>(S_1-T_1+1, S_2-T_2+1, ...)</code>, representing the similarity metric for each possible position of the template over the source.</p><p>The algorithm for matching is chosen by passing an instance of one of the following structs as the <code>alg</code> parameter: <a href="#TemplateMatching.SquareDiff"><code>SquareDiff</code></a>, <a href="#TemplateMatching.NormalizedSquareDiff"><code>NormalizedSquareDiff</code></a>, <a href="#TemplateMatching.CrossCorrelation"><code>CrossCorrelation</code></a>, <a href="#TemplateMatching.NormalizedCrossCorrelation"><code>NormalizedCrossCorrelation</code></a>, <a href="#TemplateMatching.CorrelationCoeff"><code>CorrelationCoeff</code></a>, or <a href="#TemplateMatching.NormalizedCorrelationCoeff"><code>NormalizedCorrelationCoeff</code></a>.</p><p><strong>Returns</strong></p><p>Return an array of the same number of dimensions as the input arrays, containing the calculated similarity metric at each position of the template over the source image.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">source = rand(100, 100)
template = rand(10, 10)
result = match_template(source, template, CrossCorrelation())</code></pre><pre><code class="language-julia hljs">source = rand(100, 100)
template = source[10:15, 20:30]
result = match_template(source, template, SquareDiff())
argmin(result)

# output
CartesianIndex(10, 20)</code></pre><pre><code class="language-julia hljs">source = rand(100, 100)
template = source[10:15, 20:30]
result = match_template(source, template, CorrelationCoeff())
argmax(result)

# output
CartesianIndex(10, 20)</code></pre><p>See also <a href="#TemplateMatching.match_template!"><code>match_template!</code></a> for a version of this function that writes the result into a preallocated array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mleseach/TemplateMatching.jl/blob/54493ecbef6b294d2c0b2ebf18acb6746acb74b9/src/TemplateMatching.jl#L137-L198">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TemplateMatching.match_template!" href="#TemplateMatching.match_template!"><code>TemplateMatching.match_template!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">match_template!(dest, source, template, alg::Algorithm)</code></pre><p>Performs template matching and writes the results into a preallocated destination array.</p><p>Inplace counterpart to <code>match_template</code>, designed to perform the template matching operation and store the results in a preallocated array <code>dest</code> passed by the user. This reduces memory allocations and can be more efficient when performing multiple template matching operations. It compares a template to a source image using the specified algorithm, suitable for multidimensional arrays or sets of images.</p><p>See <a href="#TemplateMatching.match_template"><code>match_template</code></a> for further documentation.</p><p><strong>Arguments</strong></p><ul><li><code>dest</code>: Preallocated destination array where the result will be stored.</li><li><code>source</code>: Source array to search within.</li><li><code>template</code>: Template array to search for.</li><li><code>alg::Algorithm</code>: Algorithm for calculating the similarity.</li></ul><p><strong>Returns</strong></p><p>Return its first argument <code>dest</code> containing the calculated similarity metric at each position of the template over the source image.</p><p>The dimensions of the <code>source</code> array should be greater than or equal to the dimensions of the template array. If the source is of size <code>(S_1, S_2, ...)</code> and <code>template</code> is <code>(T_1, T_2, ...)</code>, then <code>dest</code> must be preallocated with dimensions <code>(S_1-T_1+1, S_2-T_2+1, ...)</code>, representing the similarity metric for each possible position of the template over the source.</p><p>The algorithm for matching is chosen by passing an instance of one of the following structs as the <code>alg</code> parameter: <a href="#TemplateMatching.SquareDiff"><code>SquareDiff</code></a>, <a href="#TemplateMatching.NormalizedSquareDiff"><code>NormalizedSquareDiff</code></a>, <a href="#TemplateMatching.CrossCorrelation"><code>CrossCorrelation</code></a>, <a href="#TemplateMatching.NormalizedCrossCorrelation"><code>NormalizedCrossCorrelation</code></a>, <a href="#TemplateMatching.CorrelationCoeff"><code>CorrelationCoeff</code></a>, or <a href="#TemplateMatching.NormalizedCorrelationCoeff"><code>NormalizedCorrelationCoeff</code></a>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">source = rand(100, 100)
template = rand(10, 10)
dest = Array{Float64}(undef, 91, 91)
match_template!(dest, source, template, CrossCorrelation())

dest = Array{Float64}(undef, 100, 100)
match_template!(dest, source, template, CrossCorrelation()) # will fail</code></pre><p>See also <a href="#TemplateMatching.match_template"><code>match_template</code></a> for an immutable version of this function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mleseach/TemplateMatching.jl/blob/54493ecbef6b294d2c0b2ebf18acb6746acb74b9/src/TemplateMatching.jl#L208-L254">source</a></section></article><h1 id="Available-algorithms"><a class="docs-heading-anchor" href="#Available-algorithms">Available algorithms</a><a id="Available-algorithms-1"></a><a class="docs-heading-anchor-permalink" href="#Available-algorithms" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="TemplateMatching.SquareDiff" href="#TemplateMatching.SquareDiff"><code>TemplateMatching.SquareDiff</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Algorithm that calculate the squared difference between the source and the template.</p><p>This method is used to find how much each part of the source array differs from the template by squaring the difference between corresponding values. It is straightforward and works well when the brightness of the images does not vary much. Lower values indicate a better match.</p><p><strong>Formula</strong></p><p><span>$R_i = \sum_j (S_{i+j} - T_j)^2$</span></p><p>See also <a href="#TemplateMatching.NormalizedSquareDiff"><code>NormalizedSquareDiff</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mleseach/TemplateMatching.jl/blob/54493ecbef6b294d2c0b2ebf18acb6746acb74b9/src/TemplateMatching.jl#L18-L30">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TemplateMatching.NormalizedSquareDiff" href="#TemplateMatching.NormalizedSquareDiff"><code>TemplateMatching.NormalizedSquareDiff</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Normalized algorithm for computing the squared difference between the source and the template.</p><p>This method extends the <a href="#TemplateMatching.SquareDiff"><code>SquareDiff</code></a> algorithm by normalizing the squared differences. It is more robust against variations in brightness and contrast between the source and template images. Lower values indicate a better match.</p><p><strong>Formula</strong></p><p><span>$R_i = \frac{\sum_j (S_{i+j} - T_j)^2}{\sqrt{\sum_j S_{i+j}^2 \cdot \sum_j T_j^2}}$</span></p><p>See also <a href="#TemplateMatching.SquareDiff"><code>SquareDiff</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mleseach/TemplateMatching.jl/blob/54493ecbef6b294d2c0b2ebf18acb6746acb74b9/src/TemplateMatching.jl#L33-L46">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TemplateMatching.CrossCorrelation" href="#TemplateMatching.CrossCorrelation"><code>TemplateMatching.CrossCorrelation</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Algorithm that calculates the cross-correlation between the source and the template.</p><p>This method computes the similarity between the source and template by multiplying their corresponding elements and summing up the results. This approach inherently favors the brighter regions of the source image over the darker ones since the product of higher intensity values will naturally be greater. Higher values indicate a better match.</p><p><strong>Formula</strong></p><p><span>$R_i = \sum_j (S_{i+j} \cdot T_j)$</span></p><p>See also <a href="#TemplateMatching.NormalizedCrossCorrelation"><code>NormalizedCrossCorrelation</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mleseach/TemplateMatching.jl/blob/54493ecbef6b294d2c0b2ebf18acb6746acb74b9/src/TemplateMatching.jl#L49-L62">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TemplateMatching.NormalizedCrossCorrelation" href="#TemplateMatching.NormalizedCrossCorrelation"><code>TemplateMatching.NormalizedCrossCorrelation</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Normalized algorithm for computing the cross-correlation between the source and the template.</p><p>This method improves upon the <a href="#TemplateMatching.CrossCorrelation"><code>CrossCorrelation</code></a> by normalizing the results. It calculates the similarity by multiplying corresponding elements, summing up those products, and then dividing by the product of their norms. This reduces the bias toward brighter areas, providing a more balanced measurement of similarity. Higher values indicate a better match.</p><p><strong>Formula</strong></p><p><span>$R_i = \frac{\sum_j (S_{i+j} \cdot T_j)}{\sqrt{\sum_j S_{i+j}^2 \cdot \sum_j T_j^2}}$</span></p><p>See also <a href="#TemplateMatching.CrossCorrelation"><code>CrossCorrelation</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mleseach/TemplateMatching.jl/blob/54493ecbef6b294d2c0b2ebf18acb6746acb74b9/src/TemplateMatching.jl#L65-L79">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TemplateMatching.CorrelationCoeff" href="#TemplateMatching.CorrelationCoeff"><code>TemplateMatching.CorrelationCoeff</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Algorithm that measures the correlation coefficient between the source and the template.</p><p>This method quantifies the degree to which the source and template match by computing their correlation coefficient. It offers a balance between capturing the structural similarity and adjusting for brightness variations, making it less biased towards the brighter parts in comparison to simple cross-correlation methods. A higher value indicates a better match.</p><p><strong>Formula</strong></p><p><span>$R_i = \frac{     \sum_j ((S_{i+j} - \bar{S}_i) \cdot (T_j - \bar{T})) }{     \sqrt{\sum_j (S_{i+j} - \bar{S}_i)^2 \cdot \sum_j (T_j - \bar{T})^2} }$</span></p><p>Where <span>$\bar{S}_i$</span> is the mean of the source values within the region considered for matching and <span>$\bar{T}$</span> is the mean of the template values.</p><p>See also <a href="#TemplateMatching.NormalizedCorrelationCoeff"><code>NormalizedCorrelationCoeff</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mleseach/TemplateMatching.jl/blob/54493ecbef6b294d2c0b2ebf18acb6746acb74b9/src/TemplateMatching.jl#L82-L104">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TemplateMatching.NormalizedCorrelationCoeff" href="#TemplateMatching.NormalizedCorrelationCoeff"><code>TemplateMatching.NormalizedCorrelationCoeff</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Normalized algorithm for computing the correlation coefficient between the source and the template.</p><p>This method extends the <a href="#TemplateMatching.CorrelationCoeff"><code>CorrelationCoeff</code></a> by applying additional normalization steps, aiming to further minimize the influence of the absolute brightness levels and enhance the robustness of matching. It calculates the normalized correlation coefficient, providing a standardized measure. A higher value indicates a better match.</p><p><strong>Formula</strong></p><p><span>$R_i = \frac{     \sum_j ((S_{i+j} - \bar{S}_i) \cdot (T_j - \bar{T})) }{     \sqrt{\sum_j (S_{i+j} - \bar{S}_i)^2} \cdot \sqrt{\sum_j (T_j - \bar{T})^2} }$</span></p><p>Where <span>$\bar{S}_i$</span> is the mean of the source values within the region considered for matching and <span>$\bar{T}$</span> is the mean of the template values.</p><p>See also <a href="#TemplateMatching.CorrelationCoeff"><code>CorrelationCoeff</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mleseach/TemplateMatching.jl/blob/54493ecbef6b294d2c0b2ebf18acb6746acb74b9/src/TemplateMatching.jl#L107-L130">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Get started</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Wednesday 6 March 2024 10:26">Wednesday 6 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
